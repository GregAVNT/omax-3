jQuery(document).ready(function(e){function t(){e("#TB_window").css({height:e("#TB_ajaxContent").outerHeight()+30+"px",top:(e(window).height()+e(window).scrollTop())/2-(e("#TB_ajaxContent").outerHeight()-e(window).scrollTop()+30)/2+"px",opacity:1})}function n(t){var n=null;n=typeof t!="undefined"?t:e(".shortcode-dynamic-item");n.find(".redux-opts-upload").on("click",function(e){var t=jQuery(this).parent(),n=jQuery(this).attr("rel-id");e.preventDefault();custom_file_frame=null;custom_file_frame=wp.media.frames.customHeader=wp.media({title:jQuery(this).data("choose"),library:{type:"image"},button:{text:jQuery(this).data("update")}});custom_file_frame.on("select",function(){var e=custom_file_frame.state().get("selection").first();jQuery(".redux-opts-screenshot",t).attr("src",e.attributes.url);jQuery("#"+n).val(e.attributes.url).trigger("change");jQuery(".redux-opts-upload",t).hide();jQuery(".redux-opts-screenshot",t).show();jQuery(".redux-opts-upload-remove",t).show()});custom_file_frame.open()});n.find(".redux-opts-upload-remove").on("click",function(e){var t=jQuery(this).parent(),n=jQuery(this).attr("rel-id");e.preventDefault();jQuery("#"+n).val("");jQuery(this).prev().fadeIn("slow");jQuery(".redux-opts-screenshot",t).fadeOut("slow");jQuery(this).fadeOut("slow")})}function r(){var t=e("<span>");t.addClass("output");e("div.shortcode-options[data-name=bar_graph] .shortcode-dynamic-items > div:last-child .content:last-child").append(t);e("[data-slider]").bind("slider:ready slider:changed",function(t,n){e(this).nextAll(".output:first").html(n.value+"%").attr("data-num",n.value)})}function o(){var t="",n="1",r="1",i="1",s="1",o="1",u="1",a,f,l,c,h,p,d,v,m,g,y,b,w,E;e(".shortcode-options[data-name=zee_columns]").is(":visible")?e(".shortcode-options[data-name=zee_columns] .shortcode-dynamic-item-size").each(function(){a=e(this).parent().parent().find(".shortcode-dynamic-item-text").val();l=e(this).parent().parent().find(".shortcode-dynamic-item-size").val();t+='[zee_column size="'+l+'" id="column'+s+'"]'+a+"[/zee_column]";s++}):e(".shortcode-options[data-name=zee_social]").is(":visible")?e(".shortcode-options[data-name=zee_social] .shortcode-dynamic-item-url").each(function(){h=e(this).parent().parent().find(".shortcode-dynamic-item-url").val();c=e(this).parent().parent().find(".shortcode-dynamic-item-media").val();t+='[zee_media name="'+c+'" url="'+h+'"]';o++}):e(".shortcode-options[data-name=zee_progressbar]").is(":visible")&&e(".shortcode-options[data-name=zee_progressbar] .shortcode-dynamic-item-style").each(function(){p=e(this).parent().parent().find(".shortcode-dynamic-item-style").val();d=e(this).parent().parent().find(".shortcode-dynamic-item-width").val();v=e(this).parent().parent().find(".shortcode-dynamic-item-min").val();m=e(this).parent().parent().find(".shortcode-dynamic-item-max").val();g=e(this).parent().parent().find(".shortcode-dynamic-item-default").val();y=e(this).parent().parent().find(".shortcode-dynamic-item-text").val();t+='[zee_bar style="'+p+'" width="'+d+'" min="'+v+'" max="'+m+'" default="'+g+'"] '+y+" [/zee_bar]";u++});e("#shortcode-storage-d").html(t)}function u(){var t=e("#zee-shortcodes").val(),n="";i.selection.setContent(e("#shortcode-storage-o").text()+n);return!1}function a(t){var n=e("#zee-shortcodes").val(),r=e("#options-"+n).attr("data-type"),i="",s="",a="",f="";t=t||"";o();var l=" ["+n;e("#options-"+n).attr("data-type")=="checkbox"&&e("#options-"+n+" input.last").attr("checked")=="checked"&&(t="_last");l+=t;e("#options-"+n+" input[type=checkbox]").each(function(){e(this).attr("checked")=="checked"&&e(this).attr("class")!="last"&&(i+=" "+e(this).attr("class")+'="true"')});l+=i;e("#options-"+n+' textarea:not("#content")').each(function(){s+=" "+e(this).attr("data-attrname")+'="'+e(this).val()+'"'});r!="dynamic"&&(l+=s);e("#options-"+n+' select:not(".dynamic")').each(function(){a+=" "+e(this).attr("id")+'="'+e(this).attr("value")+'"'});l+=a;e("#options-"+n+" [data-name=image-upload] img.redux-opts-screenshot").each(function(){f+=" "+e(this).attr("id")+'="'+e(this).attr("src")+'"'});l+=f;e("#options-"+n+" input.attr").each(function(){e(this).attr("type")=="text"?l+=" "+e(this).attr("data-attrname")+'="'+e(this).val()+'"':e(this).attr("checked")=="checked"&&(l+=" "+e(this).attr("data-attrname")+'="'+e(this).val()+'"')});n=="zee_icon"&&e(".icon-option i.selected").length>0&&(l+=' image="'+e(".icon-option i.selected").attr("class").split(" ")[0]+'"');l+="]";e("#shortcode-storage-o").html(l);r!="dynamic"&&e("#shortcode-storage-d").text(e("#shortcode-content textarea").val());r!="regular"&&r!="radios"&&r!="direct_to_editor"&&e("#shortcode-storage-c").html("[/"+n+t+"]");r=="direct_to_editor"&&u()}e("#TB_window").css("opacity",0);setTimeout(t,10);setTimeout(t,100);e(window).resize(t);n();r();var i=tinyMCE.activeEditor,s=i.selection.getContent();e("#shortcode-content textarea").val(s);e("#add-shortcode").click(function(){var t=e("#zee-shortcodes").val(),n=e("#options-"+t).attr("data-type");a();n!="direct_to_editor"&&i.selection.setContent(e("#shortcode-storage-o").text()+e("#shortcode-storage-d").text()+e("#shortcode-storage-c").text());tb_remove();return!1});e(".shortcode-options, #shortcode-content , #add-shortcode").hide();e("#zee-shortcodes").change(function(){e(".shortcode-options").hide();e("#options-"+e(this).val()).show();var t=e("#options-"+e(this).val()).attr("data-type");t=="checkbox"||t=="simple"?e("#shortcode-content").show().find("textarea").val(s):e("#shortcode-content textarea").val("").parent().parent().hide();e("#add-shortcode").show()});e('#options-box input[type="radio"]').click(function(){if(e(this).val()=="custom"){e("#custom-box-name").attr("data-attrname","style").addClass("attr");e('#options-box input[type="radio"]').attr("data-attrname","temp").removeClass("attr")}else{e('#options-box input[type="radio"]').attr("data-attrname","style").addClass("attr");e("#custom-box-name").attr("data-attrname","temp").removeClass("attr")}});e(".add-list-item").click(function(){e(this).parent().find(".remove-list-item").is(":visible")||e(this).parent().find(".remove-list-item").show();var t=e(this).parent().find(".shortcode-dynamic-item:first").clone();t.find("input[type=text],textarea").attr("value","");if(t.find(".redux-opts-upload").length>0){t.find(".redux-opts-screenshot").attr("src","");t.find(".redux-opts-upload-remove").hide();t.find(".redux-opts-upload").css("display","inline-block");setTimeout(function(){n(t)},200)}e(this).prevAll("div").append(t);t.find(".percent").length>0&&r();return!1});e(".remove-list-item").live("click",function(){if(e(this).parent().find(".shortcode-dynamic-item").length>1){e(this).parent().find("#options-item .shortcode-dynamic-item:last").remove();o()}e(this).parent().find(".shortcode-dynamic-item").length==1&&e(this).hide();return!1});e(".remove-list-item").hide();e(".shortcode-dynamic-item-input, .shortcode-dynamic-item-text").live("keyup",function(){o()});e(".shortcode-dynamic-item-size").live("change",function(){o()});e(".shortcode-dynamic-item textarea").live("input propertychange",function(){o()});e(".icon-option i").click(function(){e(".icon-option i").removeClass("selected");e(this).addClass("selected")})});